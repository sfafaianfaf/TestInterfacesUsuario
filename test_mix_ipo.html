<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IPO ¬∑ Test MIX (66% T1-3 ¬∑ 34% T4-6)</title>

  <style>
    :root{
      --bg:#0b1220; --card:#121a2b; --muted:#9aa4b2; --text:#e7eefc;
      --accent:#6ea8fe; --ok:#22c55e; --bad:#ef4444; --warn:#f59e0b; --border:#24304a;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 600px at 20% 0%, #132044 0%, var(--bg) 60%);
      color:var(--text); line-height:1.35;
    }
    .wrap{max-width:980px; margin:0 auto; padding:24px 16px 48px;}
    header{display:flex; justify-content:space-between; gap:12px; align-items:flex-end; flex-wrap:wrap; margin-bottom:14px;}
    h1{font-size:20px; margin:0; letter-spacing:.2px;}
    .sub{color:var(--muted); font-size:13px; margin-top:6px;}
    .pill{
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 12px; border:1px solid var(--border);
      border-radius:999px; background: rgba(18,26,43,.7);
      color:var(--muted); font-size:13px;
    }
    .menuBtn{
      display:inline-flex; align-items:center; gap:8px;
      text-decoration:none;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(110,168,254,.55);
      background: rgba(110,168,254,.12);
      color: #e7eefc;
      font-weight:800;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .menuBtn:hover{background: rgba(110,168,254,.18); transform: translateY(-1px);}
    .card{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(18,26,43,.92), rgba(18,26,43,.7));
      border-radius:16px; padding:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .row{display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;}
    .progress{width:100%; height:10px; border-radius:999px; background:#0e1628; border:1px solid var(--border); overflow:hidden; margin-top:10px;}
    .bar{height:100%; width:0%; background: linear-gradient(90deg, var(--accent), #8b5cf6); border-radius:999px; transition: width .25s ease;}
    .q{font-size:18px; margin:14px 0 10px;}
    .topic{color:var(--muted); font-size:13px;}
    .opts{display:grid; gap:10px; margin-top:8px;}
    label.opt{
      display:flex; gap:10px; align-items:flex-start;
      padding:12px; border-radius:12px;
      border:1px solid var(--border); background: rgba(11,18,32,.45);
      cursor:pointer;
      transition: transform .06s ease, border-color .15s ease, background .15s ease;
    }
    label.opt:hover{transform: translateY(-1px); border-color: rgba(110,168,254,.55); background: rgba(110,168,254,.08);}
    input[type="radio"]{margin-top:3px; accent-color: var(--accent); transform: scale(1.05);}
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;}
    button{
      border:1px solid var(--border); background: rgba(11,18,32,.55);
      color:var(--text); padding:10px 12px; border-radius:12px;
      cursor:pointer; font-weight:800; letter-spacing:.2px;
      transition: background .15s ease, transform .06s ease, border-color .15s ease;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    button:hover{transform: translateY(-1px); border-color: rgba(110,168,254,.55); background: rgba(110,168,254,.10);}
    button.primary{border-color: rgba(110,168,254,.7); background: rgba(110,168,254,.16);}
    button.danger{border-color: rgba(239,68,68,.65); background: rgba(239,68,68,.10);}
    button.ok{border-color: rgba(34,197,94,.65); background: rgba(34,197,94,.10);}
    button:disabled{opacity:.45; cursor:not-allowed; transform:none;}
    .feedback{
      margin-top:12px; padding:12px; border-radius:12px;
      border:1px solid var(--border); background: rgba(11,18,32,.45);
      display:none;
    }
    .feedback.ok{border-color: rgba(34,197,94,.55); background: rgba(34,197,94,.10)}
    .feedback.bad{border-color: rgba(239,68,68,.55); background: rgba(239,68,68,.10)}
    .feedback.warn{border-color: rgba(245,158,11,.55); background: rgba(245,158,11,.10)}
    .small{color:var(--muted); font-size:13px; margin-top:8px;}
    .setup{display:block;}
    .quiz{display:none;}
    .summary{display:none; margin-top:14px;}
    .grid{display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px; margin-top:12px;}
    .kpi{padding:12px; border-radius:14px; border:1px solid var(--border); background: rgba(11,18,32,.45);}
    .kpi .n{font-size:22px; font-weight:900; margin-bottom:4px}
    .kpi .t{color:var(--muted); font-size:13px}
    @media (max-width:740px){ .grid{grid-template-columns: repeat(2, minmax(0,1fr));} }
    details.reviewItem{
      border:1px solid var(--border); border-radius:14px; background: rgba(11,18,32,.35);
      padding:10px 12px; margin:10px 0;
    }
    details.reviewItem summary{cursor:pointer; font-weight:800;}
    .tag{display:inline-block; padding:2px 8px; border:1px solid var(--border); border-radius:999px; color:var(--muted); font-size:12px; margin-left:8px;}
    .divider{height:1px; background: rgba(36,48,74,.8); margin:12px 0;}
    input[type="number"]{
      width:140px; padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background: rgba(11,18,32,.55); color: var(--text); font-weight:800; outline:none;
    }
    select{
      padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background: rgba(11,18,32,.55); color: var(--text); font-weight:700; outline:none;
    }
  </style>
</head>

<body>
<div class="wrap">
  <header>
    <div>
      <h1>Test MIX ¬∑ IPO</h1>
      <div class="sub">
        Banco ‚ÄúTOP 60‚Äù curado (sin cargar otros archivos). Mezcla: <b>‚âà66%</b> (Tema 1‚Äì3) + <b>‚âà34%</b> (Tema 4‚Äì6).<br/>
        Puntuaci√≥n: +1 correcta ¬∑ ‚àí1/3 incorrecta ¬∑ 0 en blanco.
      </div>
    </div>
    <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end;">
      <a class="menuBtn" href="index.html">üè† Men√∫</a>
      <div class="pill">Preg. <b id="qNum">0</b>/<span id="qTotal">0</span> ¬∑ Nota: <b id="scoreNow">0.00</b></div>
    </div>
  </header>

  <div class="card">
    <!-- SETUP -->
    <div class="setup" id="setup">
      <div class="row">
        <div>
          <div style="font-size:16px; font-weight:900;">Configura tu test MIX</div>
          <div class="small" id="setupNote"></div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="row" style="align-items:flex-end;">
        <div>
          <div class="small" style="margin:0 0 6px;">N√∫mero de preguntas (N)</div>
          <input type="number" id="numQuestions" min="10" max="60" value="30" />
          <div class="small">M√°ximo: 60 (banco TOP 60).</div>
        </div>

        <div>
          <div class="small" style="margin:0 0 6px;">Modo</div>
          <select id="modeSelect">
            <option value="instant">Feedback al confirmar</option>
            <option value="exam">Modo examen (feedback solo al final)</option>
          </select>
        </div>

        <div class="actions" style="margin-top:0;">
          <button class="primary" id="btnStart">Empezar</button>
          <button class="danger" id="btnHardReset">Reset</button>
        </div>
      </div>
    </div>

    <!-- QUIZ -->
    <div class="quiz" id="quiz">
      <div class="row">
        <div class="topic" id="topicTag"></div>
        <div class="topic">
          Confirmadas: <b id="doneCount">0</b> ¬∑ Correctas: <b id="okCount">0</b> ¬∑ Incorrectas: <b id="badCount">0</b> ¬∑ En blanco: <b id="blankCount">0</b>
        </div>
      </div>

      <div class="progress" aria-label="Progreso">
        <div class="bar" id="bar"></div>
      </div>

      <div class="q" id="questionText"></div>
      <div class="opts" id="options"></div>

      <div class="actions">
        <button id="btnPrev">‚¨ÖÔ∏è Anterior</button>
        <button id="btnNext">Siguiente ‚û°Ô∏è</button>
        <button class="ok" id="btnConfirm">Confirmar / Puntuar</button>
        <button id="btnSkip">Dejar en blanco</button>
        <button class="danger" id="btnFinish">Finalizar test</button>
      </div>

      <div class="feedback" id="feedbackBox"></div>
      <div class="small" id="hintText"></div>

      <!-- SUMMARY -->
      <div class="summary" id="summary">
        <h2 style="margin:14px 0 8px; font-size:18px;">Resultado final</h2>
        <div class="grid">
          <div class="kpi"><div class="n" id="finalScore">0.00</div><div class="t">Nota (penaliza 1/3)</div></div>
          <div class="kpi"><div class="n" id="finalOk">0</div><div class="t">Correctas</div></div>
          <div class="kpi"><div class="n" id="finalBad">0</div><div class="t">Incorrectas</div></div>
          <div class="kpi"><div class="n" id="finalBlank">0</div><div class="t">En blanco</div></div>
        </div>

        <div class="divider"></div>

        <div class="row">
          <div style="font-weight:900;">Revisi√≥n pregunta por pregunta</div>
          <div class="actions" style="margin-top:0;">
            <button id="btnExpandAll">Expandir todo</button>
            <button id="btnCollapseAll">Contraer todo</button>
            <button class="primary" id="btnBackToSetup">Hacer otro test</button>
          </div>
        </div>

        <div id="reviewList"></div>
      </div>
    </div>
  </div>
</div>

<script>
  // ====== TOP 60 (40 de T1-3, 20 de T4-6) ======
  const BANK_A = [{"topic":"Ergonom√≠a","q":"Objetivo de la ergonom√≠a seg√∫n el tema:","options":["Maximizar seguridad, eficiencia y fiabilidad; simplificar tareas e incrementar confort y satisfacci√≥n.","Maximizar complejidad para retar al usuario.","Reducir la satisfacci√≥n del usuario.","Eliminar el uso del color."],"a":0,"exp":"Frase literal del tema."},{"topic":"Ergonom√≠a","q":"La ergonom√≠a estudia:","options":["Caracter√≠sticas f√≠sicas de la interacci√≥n (entorno f√≠sico).","S√≥lo procesos mentales.","S√≥lo dise√±o de logotipos.","S√≥lo protocolos web."],"a":0,"exp":"Ergonom√≠a: caracter√≠sticas f√≠sicas de la interacci√≥n."},{"topic":"Atenci√≥n ¬∑ Definici√≥n","q":"La atenci√≥n se define como:","options":["Proceso de concentraci√≥n mental sobre un conjunto de est√≠mulos (o pensamientos).","Capacidad ilimitada de retenci√≥n sensorial.","Un tipo de percepci√≥n exclusivamente visual.","Un protocolo de interacci√≥n."],"a":0,"exp":"Definici√≥n textual en la diapositiva de atenci√≥n."},{"topic":"Disciplinas","q":"¬øCu√°l de estas aparece como disciplina relacionada con IPO en el tema?","options":["Astrolog√≠a","Ergonom√≠a","Geolog√≠a","Bot√°nica"],"a":1,"exp":"Mapa de disciplinas: Psicolog√≠a, Dise√±o, Sociolog√≠a, Ergonom√≠a, Programaci√≥n, Ing. Software, IA."},{"topic":"IPO ¬∑ Definici√≥n","q":"Seg√∫n ACM SIGCHI (1992), la IPO es la disciplina relacionada con:","options":["El an√°lisis financiero de sistemas inform√°ticos.","El dise√±o, implementaci√≥n y evaluaci√≥n de sistemas inform√°ticos interactivos para uso de seres humanos y el estudio de fen√≥menos relacionados.","La programaci√≥n de sistemas operativos para servidores.","La creaci√≥n de hardware para redes."],"a":1,"exp":"Definici√≥n de la diapositiva de ‚ÄúDefiniciones‚Äù (ACM SIGCHI, 1992)."},{"topic":"IPO ¬∑ Terminolog√≠a","q":"En ingl√©s, Interacci√≥n Persona-Ordenador se denomina:","options":["HCI/CHI","HTTP/HTML","UX/UI","API/SDK"],"a":0,"exp":"Human-Computer Interaction (HCI/CHI)."},{"topic":"Psicolog√≠a","q":"La contribuci√≥n de la psicolog√≠a a la IPO incluye:","options":["S√≥lo medir temperatura del hardware.","Teor√≠as sobre comportamiento y procesamiento de informaci√≥n + metodolog√≠as para evaluar satisfacci√≥n con el dise√±o.","S√≥lo dise√±o de servidores.","S√≥lo clasificaci√≥n tipogr√°fica."],"a":1,"exp":"Se indica expl√≠citamente en ‚ÄúPsicolog√≠a‚Äù."},{"topic":"Objetivos IPO","q":"Un objetivo de la IPO es desarrollar o mejorar:","options":["Seguridad, utilidad, efectividad, eficiencia y usabilidad.","S√≥lo la est√©tica visual.","√önicamente la velocidad del procesador.","Exclusivamente la seguridad f√≠sica del edificio."],"a":0,"exp":"Lista expl√≠cita en ‚ÄúObjetivos‚Äù."},{"topic":"Percepci√≥n","q":"Las percepciones m√°s importantes para IPO son:","options":["Visual, ac√∫stica y h√°ptica.","Gusto, olfato y equilibrio.","S√≥lo visual.","S√≥lo auditiva."],"a":0,"exp":"Se enumeran visual (ojo), ac√∫stica (o√≠do), h√°ptica (tacto)."},{"topic":"Atenci√≥n selectiva","q":"Prestamos atenci√≥n selectivamente porque:","options":["Tenemos capacidad limitada; sin selecci√≥n podr√≠amos ser desbordados (overloaded).","Tenemos capacidad infinita.","Los est√≠mulos no influyen.","La memoria sensorial es permanente."],"a":0,"exp":"Se indica limitaci√≥n y riesgo de overload."},{"topic":"Tacto","q":"El tacto es importante especialmente en:","options":["Sistemas de Realidad Virtual y para personas con discapacidad visual o auditiva.","SEO de p√°ginas web.","Compresi√≥n de im√°genes.","Dise√±o de protocolos."],"a":0,"exp":"Diapositiva del tacto."},{"topic":"Interfaz ¬∑ CHI","q":"Seg√∫n CHI, una interfaz incluye:","options":["Lenguaje de entrada para el usuario, lenguaje de salida para el ordenador y un protocolo de interacci√≥n.","S√≥lo lenguaje de salida.","S√≥lo lenguaje de entrada.","S√≥lo un conjunto de iconos."],"a":0,"exp":"Definici√≥n en la diapositiva final de interfaz."},{"topic":"Color ¬∑ Periferia","q":"Se recomienda usar blanco para:","options":["Informaci√≥n perif√©rica.","Texto principal siempre.","Avisos de error √∫nicamente.","Sombras de iconos."],"a":0,"exp":"Recomendaci√≥n expl√≠cita."},{"topic":"Interfaz ¬∑ Moran","q":"Seg√∫n Moran, la interfaz son:","options":["Los aspectos del sistema con los que el usuario entra en contacto.","S√≥lo los aspectos f√≠sicos del teclado.","S√≥lo la est√©tica del dise√±o.","S√≥lo el sistema operativo."],"a":0,"exp":"Definici√≥n atribuida a Moran."},{"topic":"Tema 2","q":"¬øCu√°l NO aparece como bloque de ‚ÄòDispositivos de interacci√≥n‚Äô en el esquema del tema?","options":["Teclado","Apuntadores","Pantallas","Lenguaje natural"],"a":3,"exp":"El esquema de dispositivos incluye teclado, apuntadores, pantallas, rastreo ocular y otros dispositivos."},{"topic":"Tema 2","q":"Otro criterio de evaluaci√≥n de met√°foras que cita el tema es‚Ä¶","options":["representatividad: f√°cil de representar (visual/auditivo/palabras).","que sea siempre silenciosa y sin texto.","que solo use iconos sin verbos.","que elimine carpetas dentro de carpetas."],"a":0,"exp":"Met√°fora ideal: representable visual, auditiva o verbalmente."},{"topic":"Tema 2","q":"¬øCu√°l est√° en la lista de estilos de interacci√≥n del tema?","options":["Interfaz por l√≠nea de √≥rdenes.","HMD con CRT peque√±o.","Posicionadores ultras√≥nicos.","Guante con fibra √≥ptica."],"a":0,"exp":"Se enumeran estilos como l√≠nea de √≥rdenes, men√∫s, etc."},{"topic":"Tema 2","q":"En ‚ÄòIdentificaci√≥n de problemas del usuario‚Äô se incluye‚Ä¶","options":["examinar tareas, analizar dificultades y observar uso con prototipo.","aplicar triangulaci√≥n electromagn√©tica para posicionadores.","definir HMD de LED de columna √∫nica.","seleccionar QWERTY como est√°ndar."],"a":0,"exp":"Examinar tareas/dificultades y observar con prototipo."},{"topic":"Tema 2","q":"Estilo de interacci√≥n (Preece, 1994) se entiende como‚Ä¶","options":["t√©rmino gen√©rico de maneras en que usuarios se comunican con el ordenador.","un tipo de teclado alternativo a QWERTY.","un dispositivo de salida para resultados.","un paradigma exclusivo de realidad virtual."],"a":0,"exp":"Definici√≥n general de estilos de interacci√≥n."},{"topic":"Tema 2","q":"En ‚ÄòEvaluaci√≥n de la met√°fora‚Äô, un punto a revisar es‚Ä¶","options":["aplicabilidad/estructura y si crea falsas expectativas.","si el teclado es AZERTY o QWERTZ.","si la pantalla es CRT o LCD.","si el rat√≥n supera 2000dpi."],"a":0,"exp":"Se eval√∫a aplicabilidad y falsas expectativas."},{"topic":"Tema 2","q":"Fases del dise√±o de met√°foras (orden l√≥gico del tema):","options":["Definici√≥n funcional ‚Üí Identificaci√≥n de problemas ‚Üí Generaci√≥n ‚Üí Evaluaci√≥n.","Generaci√≥n ‚Üí Evaluaci√≥n ‚Üí Definici√≥n funcional ‚Üí Identificaci√≥n.","Evaluaci√≥n ‚Üí Generaci√≥n ‚Üí Identificaci√≥n ‚Üí Definici√≥n funcional.","Identificaci√≥n ‚Üí Definici√≥n funcional ‚Üí Evaluaci√≥n ‚Üí Generaci√≥n."],"a":0,"exp":"Es el orden mostrado en el esquema."},{"topic":"Tema 2","q":"Interacci√≥n por gestos: ejemplos mencionados incluyen‚Ä¶","options":["gesture pendant y Wiimote.","trackball y TypeMatrix.","HMD y gafas LCD resplandecientes.","teclado HCESAR y QWERTZ."],"a":0,"exp":"Gesture pendant y Wiimote."},{"topic":"Tema 2","q":"Las variantes por ergonom√≠a citadas incluyen‚Ä¶","options":["L-Type y TypeMatrix.","QWERTY y AZERTY.","HCESAR y QWERTZ.","DVORAK y QWERTY."],"a":0,"exp":"El tema muestra ejemplos ergon√≥micos como L-Type y TypeMatrix."},{"topic":"Tema 2","q":"En ratones √≥pticos, el tema distingue sensores por DPI: √≥ptico y l√°ser. ¬øCu√°l es la idea general?","options":["√ìptico t√≠pico por debajo de ~800dpi y l√°ser por encima (‚âà800‚Äì2000dpi).","√ìptico por encima de 2000dpi y l√°ser por debajo.","Ambos siempre iguales; DPI no aplica.","El l√°ser solo se usa en trackballs."],"a":0,"exp":"Se compara √≥ptico (<800dpi) frente a l√°ser (>800dpi‚Äì2000dpi)."},{"topic":"Tema 2","q":"La met√°fora del escritorio introducida por Xerox (y asociada a Macintosh) supuso‚Ä¶","options":["un cambio fuerte en la usabilidad al hacer la interacci√≥n m√°s accesible.","el fin de las interfaces visuales y vuelta a l√≠nea de comandos.","una sustituci√≥n total de iconos por lenguaje natural.","un paradigma exclusivo para realidad aumentada."],"a":0,"exp":"Impacto importante en usabilidad."},{"topic":"Tema 2","q":"¬øC√≥mo se captura el movimiento en un rat√≥n mec√°nico est√°ndar (resumen correcto)?","options":["La bola mueve rodillos; discos perforados interrumpen luz; sensores generan se√±ales de velocidad.","Un l√°ser mide la textura; la CPU integra desplazamiento; se env√≠a por Bluetooth.","Un giroscopio detecta orientaci√≥n; se triangula con una c√°mara externa.","Un touchpad interno traduce presi√≥n en coordenadas absolutas."],"a":0,"exp":"Bola‚Üírodillos‚Üídiscos de codificaci√≥n‚ÜíLED‚Üísensores‚Üíse√±ales."},{"topic":"Tema 2","q":"¬øQu√© conjunto son variantes esquem√°ticas por idioma mencionadas en el tema?","options":["QWERTY, AZERTY, QWERTZ, HCESAR y DVORAK.","QWERTY, Dvorak, Colemak, Workman y Neo.","AZERTY, QWERTY, Maltron, TypeMatrix y L-Type.","QWERTZ, DVORAK, L-Type, Trackball y Touchpad."],"a":0,"exp":"En las diapositivas se listan esas cinco variantes."},{"topic":"Tema 3","q":"¬øQu√© autor se asocia a ‚Äòdejar el control a los usuarios‚Äô en los principios citados?","options":["Simpson (1985).","Preece (1994).","IBM (2001).","W3C (WAI)."],"a":0,"exp":"Aparece en la lista de autores de principios."},{"topic":"Tema 3","q":"Sobre dise√±o para web frente a interfaces tradicionales, el tema resume que‚Ä¶","options":["hay principios aplicables, pero la web tiene particularidades propias.","no hay ning√∫n principio reutilizable, todo cambia.","la web exige siempre CMYK y no RGB.","la web solo puede usar texto, nunca iconos."],"a":0,"exp":"Se indica que hay solapamiento, pero la web introduce diferencias."},{"topic":"Tema 3","q":"Sobre gu√≠as web, el tema menciona como recursos de referencia‚Ä¶","options":["usability.gov y manuales reconocidos (p.ej., Yale).","solo Microsoft Word y Finder.","√∫nicamente ISO/IEC 9126 para color.","solo p√°ginas internas privadas sin acceso."],"a":0,"exp":"Se citan enlaces como usability.gov y manual de Yale como referencia."},{"topic":"Tema 3","q":"Una raz√≥n por la que los principios ayudan al dise√±o es que‚Ä¶","options":["permiten consistencia dentro de un sistema o familia de productos.","garantizan que no habr√° errores de usuario nunca.","obligan al usuario a aprender comandos de memoria.","eliminan la necesidad de terminolog√≠a com√∫n."],"a":0,"exp":"Se remarca la consistencia como ventaja."},{"topic":"Tema 3","q":"Diferencia clave: un ‚Äòprincipio‚Äô frente a una ‚Äòdirectriz‚Äô (regla) es que el principio‚Ä¶","options":["es un objetivo general y la directriz concreta c√≥mo aplicarlo.","es un ejemplo gr√°fico y la directriz es un est√°ndar legal.","es siempre obligatorio y la directriz siempre opcional.","solo aplica a color y la directriz solo a tipograf√≠a."],"a":0,"exp":"Principios organizan objetivos; directrices bajan a nivel de regla aplicable."},{"topic":"Tema 3","q":"Una recomendaci√≥n de usabilidad del tema es usar color en mensajes: por ejemplo‚Ä¶","options":["rojo para alertar de un error y amarillo para avisos.","azul para errores y negro para √©xito.","verde para errores y rojo para confirmaciones.","morado para todo porque es neutro."],"a":0,"exp":"Se muestra codificaci√≥n t√≠pica en mensajes."},{"topic":"Tema 3","q":"¬øCu√°l es un ejemplo de gu√≠a de estilo ‚Äòde plataforma‚Äô citado en el tema?","options":["Motif (OSF) o CDE para UNIX, entre otros.","WCAG como gu√≠a de teclado.","CMYK como gu√≠a de interacci√≥n.","RGB como gu√≠a corporativa de producto."],"a":0,"exp":"Motif/CDE aparecen como estilos/plataformas."},{"topic":"Tema 3","q":"Beneficios t√≠picos de est√°ndares/gu√≠as de estilo citados incluyen‚Ä¶","options":["terminolog√≠a com√∫n, mantenimiento/evoluci√≥n y reducci√≥n de formaci√≥n.","obligar a memorizar comandos para ser m√°s r√°pido.","m√°s complejidad para que el usuario ‚Äòaprenda‚Äô.","eliminar identidad com√∫n del producto."],"a":0,"exp":"Aparecen como lista de beneficios."},{"topic":"Tema 3","q":"En el tema, ¬øqu√© se busca con est√°ndares y gu√≠as de estilo en IPO?","options":["Asegurar una base com√∫n de dise√±o y consistencia de interfaces.","Sustituir por completo las pruebas con usuarios.","Eliminar la necesidad de dise√±o visual en la interfaz.","Convertir cualquier interfaz en usable autom√°ticamente."],"a":0,"exp":"Se presentan como base para dise√±o consistente; no garantizan por s√≠ solas usabilidad."},{"topic":"Tema 3","q":"El objetivo del dise√±o gr√°fico de interfaz, seg√∫n el tema, es‚Ä¶","options":["crear una interfaz ‚Äòtransparente‚Äô que no obstruya el acceso.","hacer la interfaz llamativa aunque tape la tarea.","maximizar adornos por encima de la funci√≥n.","ocultar informaci√≥n cr√≠tica para simplificar."],"a":0,"exp":"Interfaz transparente y buena experiencia."},{"topic":"Tema 3","q":"En gu√≠as de estilo, una distinci√≥n habitual del tema es‚Ä¶","options":["gu√≠as comerciales vs gu√≠as corporativas.","gu√≠as de teclado vs gu√≠as de rat√≥n.","gu√≠as legales vs gu√≠as secretas.","gu√≠as de RV vs gu√≠as de olfato."],"a":0,"exp":"Se mencionan tipos: comerciales y corporativas."},{"topic":"Tema 3","q":"Una afirmaci√≥n coherente con el tema es que las gu√≠as‚Ä¶","options":["proporcionan base, pero no garantizan por s√≠ solas usabilidad.","eliminan la necesidad de evaluaci√≥n con usuarios.","hacen innecesario el conocimiento del entorno.","funcionan igual sin importar plataforma o contexto."],"a":0,"exp":"Se insiste: base s√≠, garant√≠a total no."},{"topic":"Tema 3","q":"Los principios de IBM (2001) incluyen (seg√∫n el tema)‚Ä¶","options":["satisfacci√≥n y disponibilidad, entre otros.","solo velocidad de CPU y memoria.","√∫nicamente accesibilidad web WCAG.","exclusivamente ‚Äòhacer todo azul‚Äô."],"a":0,"exp":"En diapositivas se listan como principios a√∫n vigentes."}];
  const BANK_B = [{"topic":"Tema 4","q":"¬øQu√© afirmaci√≥n es una ventaja de internacionalizar desde el principio?","options":["a√±adir soporte internacional al final puede ser menos estable que hacerlo durante el desarrollo.","es mejor traducir al final porque siempre es m√°s estable.","la internacionalizaci√≥n solo afecta a iconos, no al texto.","se evita por completo el mantenimiento de recursos."],"a":0,"exp":"Se indica que a√±adir soporte al final puede hacerlo menos estable."},{"topic":"Tema 4","q":"Modelo ‚ÄòProducto localizado‚Äô (seg√∫n el tema):","options":["Recursos localizados + C√≥digo de la aplicaci√≥n = Producto localizado.","C√≥digo √∫nico + traducci√≥n en comentarios = producto localizado.","Iconos locales + colores locales = producto localizado.","Solo cambiar tipograf√≠a = producto localizado."],"a":0,"exp":"Esquema presentado."},{"topic":"Tema 4","q":"Internacionalizaci√≥n (i18n) es el proceso de‚Ä¶","options":["dise√±ar una aplicaci√≥n para adaptarla a lenguajes/regiones sin cambiar el c√≥digo.","traducir directamente la interfaz dentro del c√≥digo fuente.","crear dos ejecutables diferentes por cada idioma.","sustituir iconos por texto para evitar problemas culturales."],"a":0,"exp":"i18n: adaptar sin cambiar c√≥digo (texto fuera, recursos)."},{"topic":"Tema 4","q":"Clave de dise√±o para localizar: primero‚Ä¶","options":["extraer textos/datos/gr√°ficos a ficheros separados.","meter todo el texto dentro del c√≥digo para controlarlo.","traducir primero y luego separar recursos.","forzar un √∫nico idioma interno."],"a":0,"exp":"Tema: extraer recursos a fichero separado."},{"topic":"Tema 4","q":"Localizaci√≥n (l10n) es el proceso de‚Ä¶","options":["adaptar software a una regi√≥n o idioma a√±adiendo componentes espec√≠ficos y traduciendo texto.","dise√±ar la aplicaci√≥n para que no requiera cambios culturales.","eliminar formatos de fecha/hora para simplificar.","convertir todo a ASCII para compatibilidad."],"a":0,"exp":"l10n: adaptar a regi√≥n concreta traduciendo y a√±adiendo componentes locales."},{"topic":"Tema 4","q":"Elementos de interfaz a considerar en internacionalizaci√≥n (NO es uno t√≠pico):","options":["unidades de medida.","colores.","calendarios/formatos de fecha y hora.","compilador y optimizaciones de CPU."],"a":3,"exp":"Se listan cultura, iconos, colores, fechas/horas, n√∫meros/moneda, ordenaci√≥n, unidades, escritura."},{"topic":"Tema 4","q":"Un programa internacionalizado NO deber√≠a tener en el c√≥digo‚Ä¶","options":["elementos dependientes de lengua o contexto cultural.","l√≥gica de negocio y estructuras de control.","m√≥dulos de acceso a datos y red.","funciones reutilizables y librer√≠as comunes."],"a":0,"exp":"Los elementos dependientes de lengua/cultura deben estar fuera del c√≥digo."},{"topic":"Tema 5","q":"Entre los ‚Äúerrores m√°s comunes en el dise√±o‚Äù se incluyen categor√≠as como‚Ä¶","options":["Windows, Layouts, Texto, Controles, Teclado y Mouse.","C√°maras, GPS, Aceler√≥metros y Giroscopios.","HTML, CSS, JavaScript y SQL.","Voz, gestos, h√°ptica y aromas."],"a":0,"exp":"Listado de categor√≠as en la diapositiva de errores."},{"topic":"Tema 5","q":"Entre los principios de dise√±o Windows del tema aparece‚Ä¶","options":["cuidar el look and feel.","usar siempre texto azul aunque no sea enlace.","ocultar la desinstalaci√≥n para no molestar.","centrarse en caracter√≠sticas, no experiencias."],"a":0,"exp":"Se lista ‚ÄúCuidar el look and feel‚Äù."},{"topic":"Tema 5","q":"En Layouts, una recomendaci√≥n es evitar truncamiento de texto con m√°ximo‚Ä¶","options":["65 caracteres de ancho.","30 caracteres de ancho.","80 caracteres de ancho.","120 caracteres de ancho."],"a":0,"exp":"Se indica ‚Äúm√°ximo 65 caracteres de ancho‚Äù."},{"topic":"Tema 5","q":"En terminolog√≠a centrada en el usuario, ‚ÄòCursor‚Äô equivale a‚Ä¶","options":["Puntero.","Reiniciar.","Texto.","Click."],"a":0,"exp":"Tabla de equivalencias del tema."},{"topic":"Tema 5","q":"En mensajes de error, se recomienda evitar palabras como‚Ä¶","options":["‚ÄòError‚Äô, ‚Äòfallo‚Äô, ‚Äòilegal‚Äô, ‚Äòinv√°lido‚Äô, ‚Äòabortar‚Äô.","‚Äòayuda‚Äô, ‚Äòconsejo‚Äô, ‚Äòsugerencia‚Äô.","‚Äòs√≠‚Äô, ‚Äòno‚Äô, ‚Äòquiz√°‚Äô.","‚Äòguardar‚Äô, ‚Äòabrir‚Äô, ‚Äòcerrar‚Äô."],"a":0,"exp":"Listado de t√©rminos a evitar."},{"topic":"Tema 5","q":"Las advertencias de error se definen como mensajes que‚Ä¶","options":["advierten de un posible error futuro.","informan de un error ya ocurrido y bloquean siempre.","sirven solo para felicitar al usuario.","se usan √∫nicamente al cerrar la aplicaci√≥n."],"a":0,"exp":"Definici√≥n del tema."},{"topic":"Tema 5","q":"Otro principio citado: ‚ÄúDise√±ar experiencias, no‚Ä¶‚Äù","options":["caracter√≠sticas.","men√∫s.","ventanas.","atajos."],"a":0,"exp":"Se menciona tal cual."},{"topic":"CSS","q":"Una ventaja para el usuario de dise√±ar con CSS es:","options":["P√°ginas m√°s livianas y mejor accesibilidad/usabilidad.","Obligar a IE 800x600.","Eliminar la necesidad de texto.","Hacer que el site dependa de un plugin."],"a":0,"exp":"Ventajas para usuario: livianas, accesibilidad, usabilidad, estilos impresi√≥n/m√≥viles."},{"topic":"UX ¬∑ Garrett","q":"En el modelo de Garrett, el ‚Äúesqueleto‚Äù incluye:","options":["Dise√±o de interacci√≥n y arquitectura de la informaci√≥n","Necesidades del usuario","Especificaciones funcionales","Dise√±o visual"],"a":0,"exp":"Esqueleto: dise√±o de interacci√≥n + arquitectura de informaci√≥n (y navegaci√≥n/interfaz seg√∫n detalle)."},{"topic":"Dise√±o web","q":"‚ÄúImplementaci√≥n‚Äù en dise√±o incluye:","options":["Captar info del usuario y ya.","Crear el dise√±o con la info captada, prototipar y no quedar atrapado por una tecnolog√≠a concreta.","S√≥lo escribir el HTML final sin pruebas.","Usar siempre Flash."],"a":1,"exp":"Implementaci√≥n: crear dise√±o, prototipado, evitar dependencia tecnol√≥gica."},{"topic":"UX ¬∑ Garrett","q":"En el modelo de J.J. Garret, la base (estrategia) incluye:","options":["Dise√±o visual","Necesidades del usuario y objetivos del sitio","Dise√±o de informaci√≥n","Dise√±o de navegaci√≥n"],"a":1,"exp":"Estrategia: necesidades del usuario + objetivos del sitio."},{"topic":"Tablas vs CSS","q":"¬øPor qu√© no es buena idea maquetar con tablas?","options":["Porque HTML proh√≠be tablas.","Porque afecta sem√°ntica/accesibilidad; la maquetaci√≥n debe hacerse con CSS.","Porque no funciona en m√≥vil jam√°s.","Porque aumenta siempre el tama√±o del texto."],"a":1,"exp":"Tablas para datos; maquetaci√≥n con CSS."},{"topic":"Web din√°mica","q":"Una opci√≥n de web din√°mica en el cliente, seg√∫n el tema, es:","options":["CGI","JavaScript","Servlets","ASP en servidor"],"a":1,"exp":"HTML din√°mico + JavaScript (cliente)."}];

  // --- Anti ‚Äúdoble salto‚Äù (m√≥vil)
  function onTap(el, fn){
    let lock = 0;
    el.addEventListener("click", (e)=>{
      e.preventDefault();
      const now = Date.now();
      if(now - lock < 300) return;
      lock = now;
      fn();
    }, {passive:false});
  }

  const NEG = 1/3;
  const ABCD = (i) => String.fromCharCode(65+i);
  function fmt(n){ return (Math.round(n*100)/100).toFixed(2); }
  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]] = [arr[j],arr[i]];
    }
    return arr;
  }

  // ---- Estado
  let session = [];
  let idx = 0;
  let answers = [];
  let mode = "instant";

  // ---- DOM
  const qNum = document.getElementById("qNum");
  const qTotal = document.getElementById("qTotal");
  const scoreNow = document.getElementById("scoreNow");

  const setupEl = document.getElementById("setup");
  const quizEl = document.getElementById("quiz");
  const summaryEl = document.getElementById("summary");

  const numQuestionsEl = document.getElementById("numQuestions");
  const modeSelectEl = document.getElementById("modeSelect");
  const setupNoteEl = document.getElementById("setupNote");

  const topicTagEl = document.getElementById("topicTag");
  const questionTextEl = document.getElementById("questionText");
  const optionsEl = document.getElementById("options");
  const feedbackBoxEl = document.getElementById("feedbackBox");
  const hintTextEl = document.getElementById("hintText");

  const doneCountEl = document.getElementById("doneCount");
  const okCountEl = document.getElementById("okCount");
  const badCountEl = document.getElementById("badCount");
  const blankCountEl = document.getElementById("blankCount");
  const barEl = document.getElementById("bar");

  const finalScoreEl = document.getElementById("finalScore");
  const finalOkEl = document.getElementById("finalOk");
  const finalBadEl = document.getElementById("finalBad");
  const finalBlankEl = document.getElementById("finalBlank");
  const reviewListEl = document.getElementById("reviewList");

  const btnStart = document.getElementById("btnStart");
  const btnHardReset = document.getElementById("btnHardReset");

  const btnPrev = document.getElementById("btnPrev");
  const btnNext = document.getElementById("btnNext");
  const btnConfirm = document.getElementById("btnConfirm");
  const btnSkip = document.getElementById("btnSkip");
  const btnFinish = document.getElementById("btnFinish");

  const btnExpandAll = document.getElementById("btnExpandAll");
  const btnCollapseAll = document.getElementById("btnCollapseAll");
  const btnBackToSetup = document.getElementById("btnBackToSetup");

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, (c)=>({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
    }[c]));
  }

  function resetAll(){
    session = [];
    idx = 0;
    answers = [];
    mode = modeSelectEl.value;

    quizEl.style.display = "none";
    summaryEl.style.display = "none";
    setupEl.style.display = "block";

    qNum.textContent = "0";
    qTotal.textContent = "0";
    scoreNow.textContent = "0.00";
    setupNoteEl.textContent = `Bancos: ${BANK_A.length} (T1-3) + ${BANK_B.length} (T4-6) = ${BANK_A.length + BANK_B.length}.`;
  }

  function compute(){
    let ok=0,bad=0,blank=0,done=0,score=0;
    answers.forEach(a=>{
      if(!a.graded) return;
      done++;
      if(a.isBlank) blank++;
      else if(a.isCorrect) ok++;
      else bad++;
      score += a.points;
    });
    return {ok,bad,blank,done,score};
  }

  function updateHeader(){
    qNum.textContent = String(session.length ? (idx+1) : 0);
    qTotal.textContent = String(session.length || 0);
    const s = compute();
    scoreNow.textContent = fmt(s.score);

    doneCountEl.textContent = s.done;
    okCountEl.textContent = s.ok;
    badCountEl.textContent = s.bad;
    blankCountEl.textContent = s.blank;

    const pct = session.length ? Math.round(((idx+1)/session.length)*100) : 0;
    barEl.style.width = pct + "%";
  }

  function render(){
    const item = session[idx];
    topicTagEl.textContent = item.topic || "MIX";
    questionTextEl.textContent = item.q;

    optionsEl.innerHTML = "";
    const name = "q_" + idx;

    item.options.forEach((opt, i)=>{
      const lab = document.createElement("label");
      lab.className = "opt";
      lab.innerHTML = `
        <input type="radio" name="${name}" value="${i}">
        <div><b>${ABCD(i)})</b> ${escapeHtml(opt)}</div>
      `;
      optionsEl.appendChild(lab);
    });

    if(answers[idx].sel !== null){
      const r = optionsEl.querySelector(`input[value="${answers[idx].sel}"]`);
      if(r) r.checked = true;
    }

    feedbackBoxEl.style.display = "none";
    feedbackBoxEl.className = "feedback";
    hintTextEl.textContent = (mode === "exam")
      ? "Modo examen: no hay feedback hasta el final."
      : "Puedes confirmar para puntuar, o dejar en blanco.";

    btnPrev.disabled = (idx===0);
    btnNext.disabled = (idx===session.length-1);

    updateHeader();
  }

  function saveSelection(){
    const checked = optionsEl.querySelector('input[type="radio"]:checked');
    answers[idx].sel = checked ? parseInt(checked.value,10) : null;
  }

  function gradeCurrent(forceBlank){
    const item = session[idx];
    const a = answers[idx];

    if(forceBlank) a.sel = null;
    else saveSelection();

    a.graded = true;
    a.isBlank = (a.sel === null);

    if(a.isBlank){
      a.isCorrect = false;
      a.points = 0;
      if(mode !== "exam"){
        feedbackBoxEl.className = "feedback warn";
        feedbackBoxEl.style.display = "block";
        feedbackBoxEl.innerHTML = `<b>En blanco</b><div class="small">No suma ni resta. Correcta: <b>${ABCD(item.correct)})</b> ${escapeHtml(item.options[item.correct])}</div>`;
      }
    }else{
      a.isCorrect = (a.sel === item.correct);
      a.points = a.isCorrect ? 1 : (-NEG);

      if(mode !== "exam"){
        feedbackBoxEl.className = "feedback " + (a.isCorrect ? "ok" : "bad");
        feedbackBoxEl.style.display = "block";
        feedbackBoxEl.innerHTML = `
          <b>${a.isCorrect ? "Correcta ‚úÖ" : "Incorrecta ‚ùå"}</b>
          <div class="small">
            Correcta: <b>${ABCD(item.correct)})</b> ${escapeHtml(item.options[item.correct])}
            ${item.exp ? `<br>${escapeHtml(item.exp)}` : ""}
          </div>
        `;
      }
    }
    updateHeader();
  }

  function finish(){
    summaryEl.style.display = "block";

    const s = compute();
    finalScoreEl.textContent = fmt(s.score);
    finalOkEl.textContent = s.ok;
    finalBadEl.textContent = s.bad;
    finalBlankEl.textContent = s.blank;

    reviewListEl.innerHTML = "";
    session.forEach((item, i)=>{
      const a = answers[i];
      const status = !a.graded ? "Sin confirmar" : (a.isBlank ? "En blanco" : (a.isCorrect ? "Correcta" : "Incorrecta"));
      const pts = !a.graded ? "0.00" : fmt(a.points);

      const your = (!a.graded || a.sel===null) ? "‚Äî" : `${ABCD(a.sel)}) ${item.options[a.sel]}`;
      const cor = `${ABCD(item.correct)}) ${item.options[item.correct]}`;

      const det = document.createElement("details");
      det.className = "reviewItem";
      det.innerHTML = `
        <summary>Pregunta ${i+1}: ${escapeHtml(status)} <span class="tag">${pts} pts</span></summary>
        <div class="small" style="margin-top:8px;"><b>Tema:</b> ${escapeHtml(item.topic || "MIX")}</div>
        <div class="small" style="margin-top:6px;"><b>Enunciado:</b> ${escapeHtml(item.q)}</div>
        <div class="small" style="margin-top:6px;"><b>Tu respuesta:</b> ${escapeHtml(your)}</div>
        <div class="small" style="margin-top:6px;"><b>Correcta:</b> ${escapeHtml(cor)}</div>
        ${item.exp ? `<div class="small" style="margin-top:6px;"><b>Nota:</b> ${escapeHtml(item.exp)}</div>` : ""}
      `;
      reviewListEl.appendChild(det);
    });
  }

  function buildSession(N){
    const n = Math.max(10, Math.min(60, parseInt(N,10) || 30));
    mode = modeSelectEl.value;

    let nA = Math.round(n * 0.66);
    let nB = n - nA;

    nA = Math.min(nA, BANK_A.length);
    nB = Math.min(nB, BANK_B.length);

    let total = nA + nB;
    if(total < n){
      const missing = n - total;
      const canA = BANK_A.length - nA;
      const addA = Math.min(missing, Math.max(0, canA));
      nA += addA;
      total += addA;

      const missing2 = n - total;
      const canB = BANK_B.length - nB;
      const addB = Math.min(missing2, Math.max(0, canB));
      nB += addB;
    }

    const A = shuffle(BANK_A.slice()).slice(0, nA);
    const B = shuffle(BANK_B.slice()).slice(0, nB);
    const picked = shuffle(A.concat(B));

    // Baraja opciones y recalcula correcta
    session = picked.map(item=>{
      const opts = item.options.map((txt, i)=>({txt, i}));
      shuffle(opts);
      const correct = opts.findIndex(o => o.i === item.a);
      return {
        topic: item.topic,
        q: item.q,
        options: opts.map(o=>o.txt),
        correct,
        exp: item.exp || ""
      };
    });

    answers = session.map(()=>({sel:null, graded:false, isBlank:true, isCorrect:false, points:0}));

    idx = 0;
    quizEl.style.display = "block";
    setupEl.style.display = "none";
    summaryEl.style.display = "none";
    render();
  }

  // --- Eventos
  onTap(btnHardReset, ()=> resetAll());
  onTap(btnPrev, ()=>{ saveSelection(); if(idx>0){ idx--; render(); } });
  onTap(btnNext, ()=>{ saveSelection(); if(idx<session.length-1){ idx++; render(); } });
  onTap(btnConfirm, ()=> gradeCurrent(false));
  onTap(btnSkip, ()=> gradeCurrent(true));
  onTap(btnFinish, ()=> finish());
  onTap(btnExpandAll, ()=> document.querySelectorAll("details.reviewItem").forEach(d=>d.open=true));
  onTap(btnCollapseAll, ()=> document.querySelectorAll("details.reviewItem").forEach(d=>d.open=false));
  onTap(btnBackToSetup, ()=> resetAll());
  onTap(btnStart, ()=> buildSession(numQuestionsEl.value));

  resetAll();
</script>
</body>
</html>
